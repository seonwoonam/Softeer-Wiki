# 2025-01-16 리뷰 및 회고

## 리뷰

### 수업
- .gitignore로 데이터 파일은 제거하기
- 영어 비문으로 쓰지 않기
- Extract와 Transform은 데이터 특성이 달라서 구분해줘야한다.
    - Extract와 transform을 분리하는 것이 몸에 베어있어야 한다.
    - 코드를 본 적 없는 다른 사람이 볼 때를 생각하고 짜야한다. 
    - Extract는 단순하게 분리해서 lambda 같은데에서 돌릴 수 있게 간단하게 짜야한다.
- 지금은 데이터 용량이 작아서 돌아가니까 되지만, 나중에 커지면 안될 수 있다.
- pandas 같은 도구 적극적으로 사용해서 최적화 할 수 있도록 구현.
- map 혹은 apply 같은 것을 사용하지 않도록. 
- multiprocessing 환경에세는 empty와 get을 사이에 간극이 존재할 수 있다. atomic 하지않다.
```python
    while not task.empty():
        print(task.get())
```
- Dockerfile을 주피터 노트북처럼 인터프리터 형태로 오류를 확인해나가면서 사용할 수 있다.
- 아주 작은 prototype 보여주면서 이야기하면 바뀔 가능성이 높다. 문제가 무엇인지 정의하고, 그거에 대한 솔루션 필요하다. 
- 타겟 고객을 선정하고 그에게 Prototype을 자주 보여줌으로써 피드백을 받자.
- 문제가 일어났을 때 내가 왜 잘못한 선택을 했는지 회고 과정을 거치는게 중요한 포인트이다.


### W2를 Docker 이미지에 담아 AWS EC2에 배포하기

- 추가 요구 사항인 W2에서 만든 주피터 노트북도 실행할 수 있도록 도커 이미지를 수정하였다. 기존의 W1을 만들어낸 이미지를 FROM에 넣어줘서 W1 이미지 기반에 W2 폴더들을 추가하는 방식으로 이미지 파일을 만들었다. 
- W2를 올리고 실행 시켜보니 pandas.read_csv를 이용하여 csv 파일을 읽었을 때 EC2 인스턴스의 메모리 용량이 1GB라 터지는 문제가 발생하였다. csv 파일이 80mb 정도라 괜찮을 것이라고 생각했는데 실제로 dataframe에 올리면 500mb정도의 램을 사용하는 것을 알게 되었다. 이로 인해 EC2에서 swap memory를 사용해서 여유 메모리를 만들어주어 해결하였다.


팀활동
- Docker를 사용하는 이유가 뭘까요?
    - **개발 환경의 손쉬운 동기화**가 가능하다. 팀 프로젝트에서 Docker를 사용한다면 어떤 컴퓨터에서 작업하든 동일한 개발 환경 제공 가능.
    - **서버 배포의 효율성** Docker는 애플리케이션과 관련된 모든 요소(코드, 라이브러리, 의존성)를 컨테이너 이미지로 패키징하여 어디서나 동일한 방식으로 실행할 수 있습니다. 이를 통해 배포 프로세스를 간소화하고, 배포 중 발생할 수 있는 환경 차이에 따른 문제를 준다.
    - **스케일 아웃 및 이식성 :** 컨테이너는 경량화되어 있어 여러 대의 서버에서 쉽게 스케일 아웃 가능. 또한 컨테이너 기반으로 실행되는 애플리케이션은 서버 간 이동도 편하게 옮길 수 있다.
    - **플랫폼 독립성** : 어플리케이션 실행하는 환경과 같이 패키징 하기 때문에, 호스트 운영 체제와 관계없이 어디서나 실행시킬 수 있다.
    - **VM 대비 경량화된 솔루션**
    - **모놀리식부터 마이크로서비스까지 대응 가능**
- 어떤 점은 더 불편한가요?
    - **보안 격리의 한계 :** Docker는 ****호스트 OS 커널을 공유하므로, 컨테이너 간 격리 수준이 VM만큼 강력하지 않다. 만약 컨테이너 내부의 애플리케이션에서 취약점이 발견되면, 호스트 OS나 다른 컨테이너에 영향을 미칠 수 있다.
    - **설정 및 초기 세팅 시간이 소요됨**(CI/CD 도구를 이용하여 해결할 수 있을 것이다.)
    - **DockerFile을 작성해야 한다는점.**
    - **단일 애플리케이션의 경우 오버헤드 증가 :**  단일 애플리케이션만 올릴 경우 오히려 오버헤드만 키우는 느낌이다.
    - 데이터를 영구적으로 저장하는 경우에는 불편
    - 작은 규모의 프로젝트에서는 굳이 사용하지 않아도 될듯하다.
- 이번 미션에서는 하나의 EC2에 하나의 Docker container를 배포했습니다. 만약에 여러대의 EC2에 여러 개의 컨테이너를 배포해야 한다면 어떻게 해야 할까요?
    - 쿠버네틱스같은 오케스트레이션 도구를 쓴다.
    - docker Swarm
    - 여러 대의 서로 다른 네트워크를 갖고 있는 EC2끼리 연결한다면 vxlan 등을 활용하여 서로 통신할 수 있게
    - 여러 컨테이너를 MSA 환경으로 설계


## 회고

### Keep
- 도커를 이용해 EC2 환경에 프로덕트를 올리고 실행시키는 과정 속에서 발생하는 문제들을 팀원분들과 함께 얘기하면서 해결할 수 있어 도움이 되었다. 컨테이너에 기본 명령어를 넣지 않았을 때 오류, 내부 포트번호를 수정했을 때 주피터 실행이 안되는 오류, apt install을 할 때 -y를 넣지 않았을 때 발생하는 오류 등 다양한 오류와 해결방법을 이해할 수 있게 되었다.
- 80mb 정도의 csv 파일이 왜 1GB Ram을 터뜨리는지에 대해 고민하고 넘어간 점이 좋았다. 실제로 Dataframe에 올라갔을 때는 램 사용량이 500mb 정도인 것을 확인하고, 그에 대한 해결방법인 swap memory 등을 찾아볼 수 있어 도움이 되었다. 

### Problem
- Docker Container를 직접 만들 Data Product에 어떻게 적용시킬 수 있을지 모르겠다. 어떻게 해야 효율적일지, 괜히 낭비적인 기술 적용이 아닐지 생각할 거리가 많은 것 같다.

### Try
- 실제로 Docker를 사용한 배포가 어떤 식으로 사용되고 있는지 예시들을 찾아봐서 추후에 어떤 식으로 적용할 수 있을지 고민해봐야겠다. 
