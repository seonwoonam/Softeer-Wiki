# 2025-01-21 리뷰 및 회고

## 리뷰

### W3M1 : 도커에 하둡을 설치하고, 싱글노드 클러스터 만들기
- Docker Volume
    - 컨테이너의 데이터를 영속적 데이터로 활용하는 방법. 컨테이너가 삭제되어도 외부에 남게 된다. 
    ```Bash
    docker run -v [볼륨 이름 or 호스트 경로]:[컨테이너 내부 디렉토리 경로] --name [컨테이너 이름] [이미지 이름]
    ```
    - 볼륨 이름과 컨테이너 내부의 하둡의 물리적 저장공간과 매핑해주었다.

- Bind mount 
    - volume과 달리 별도의 volume을 생성하지 않고 host의 파일이나 디렉터리에 바로 마운트 하는것
    - 보통은 volume을 사용하면 되는데 **개발환경** 같은거를 구상할 때는 bind mount가 유리할 수 있다.
    - Host의 디렉토리와 서로 공유함으로써 Container가 지워지더라도 Host에 남게된다.

- SSH
    - Secure Shell
    - 원격 호스트 컴퓨터에 접속하기 위해 사용되는 인터넷 프로토콜

- DockerFile 의 EXPOSE
    - 컨테이너가 사용하는 네트워크 포트들을 외부에서 접근 가능하도록 표시
    - 문서화 목적으로 주로 사용되며, 실제로 노출시키려면 docker run 명령어에서 포트 매핑을 추가로 설정해야함

- Namenode format을 cmd에 넣어놔서 컨테이너 열때마다 초기화가 발생했다. 이를 처음에 빌드할 때만 해주는 방식으로 바꿔 수정해주었다.

### W3M2 : 하둡 멀티노드 클러스터 만들기
- 각각의 노드들이 개별 컨테이너에 들어가도록 해야한다.
- Docker Compose
    - 여러개의 컨테이너를 하나의 서비스로 정의해 컨테이너의 묶음으로 관리할 수 있는 도구이다.
    - 여러 컨테이너의 run명령을 합쳐 놓은 느낌이다.

- Docker Network 
    - Docker 컨테이너 간의 통신을 관리하고, 격리하기 위한 기능을 제공하는 것.
    - Bridge Network
        - bridge 네트워크는 하나의 호스트 컴퓨터 내에서 여러 컨테이너들이 서로 소통할 수 있도록 한다.
    - Host Network
        - 컨테이너를 호스트 컴퓨터와 동일한 네트워크에서 컨테이너를 돌리기 위해서 사용.
    - Overlay Network
        - 여러 호스트에 분산되어 돌아가는 컨테이너들 간의 네트워킹을 위해서 사용.

- master가 될 컨테이너에서는 start dfs와 yarn을, datanode가 될 컨테이너에서는 start datanode만을 하는 방법으로 구성해보려고 한다.

## 회고
### Keep
- dockerfile 혹은 docker-compose 파일을 무턱대고 막 복사해와서 사용하지 않고, 한줄한줄 의미가 무엇인지 찾아보면서 작성하고 있다. 진도는 느린 것 같지만, 확실히 이해하고 넘어갈 수 있었다. 확실히 이해해야 나중에 새로운 틀에 활용이 가능하다.

### Problem
- docker와 하둡 각각을 아직 명확히 이해하지 못하고 있는 것 같다. 분할을 잘 해서 사용할 수 있다면, 꼭 모르는 것을 찾아볼 때 docker + hadoop 키워드가 아닌 hadoop 키워드 만으로도 검색해서 더 많은 자료를 참고할 수 있을 것 같다. 하지만 지금은 완전한 분리를 못하고 있어, docker + hadoop 키워드로 검색해야 도움이 되는 것 같다. 

### Try
- 각각의 개념을 명확히 하기 위해 알아보려고 한다.